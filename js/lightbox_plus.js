function WindowSize(){this.w=0;this.h=0;return this.update()}WindowSize.prototype.update=function(){var a=document;this.w=(window.innerWidth)?window.innerWidth:(a.documentElement&&a.documentElement.clientWidth)?a.documentElement.clientWidth:a.body.clientWidth;this.h=(window.innerHeight)?window.innerHeight:(a.documentElement&&a.documentElement.clientHeight)?a.documentElement.clientHeight:a.body.clientHeight;return this};function PageSize(){this.win=new WindowSize();this.w=0;this.h=0;return this.update()}PageSize.prototype.update=function(){var a=document;this.w=(window.innerWidth&&window.scrollMaxX)?window.innerWidth+window.scrollMaxX:(a.body.scrollWidth>a.body.offsetWidth)?a.body.scrollWidth:a.body.offsetWidt;this.h=(window.innerHeight&&window.scrollMaxY)?window.innerHeight+window.scrollMaxY:(a.body.scrollHeight>a.body.offsetHeight)?a.body.scrollHeight:a.body.offsetHeight;this.win.update();if(this.w<this.win.w){this.w=this.win.w}if(this.h<this.win.h){this.h=this.win.h}return this};function PagePos(){this.x=0;this.y=0;return this.update()}PagePos.prototype.update=function(){var a=document;this.x=(window.pageXOffset)?window.pageXOffset:(a.documentElement&&a.documentElement.scrollLeft)?a.documentElement.scrollLeft:(a.body)?a.body.scrollLeft:0;this.y=(window.pageYOffset)?window.pageYOffset:(a.documentElement&&a.documentElement.scrollTop)?a.documentElement.scrollTop:(a.body)?a.body.scrollTop:0;return this};function LightBox(b){var a=this;a._imgs=new Array();a._sets=new Array();a._wrap=null;a._box=null;a._img=null;a._open=-1;a._page=new PageSize();a._pos=new PagePos();a._zoomimg=null;a._expandable=false;a._expanded=false;a._funcs={move:null,up:null,drag:null,wheel:null,dbl:null};a._level=1;a._curpos={x:0,y:0};a._imgpos={x:0,y:0};a._minpos={x:0,y:0};a._expand=b.expandimg;a._shrink=b.shrinkimg;a._resizable=b.resizable;a._timer=null;a._indicator=null;a._overall=null;a._openedset=null;a._prev=null;a._next=null;a._hiding=[];a._first=false;return a._init(b)}LightBox.prototype={_init:function(c){var j=this;var g=document;if(!g.getElementsByTagName){return}if(Browser.isMacIE){return j}var h=g.getElementsByTagName("a");for(var a=0;a<h.length;a++){var b=h[a];var e=j._imgs.length;var k=String(b.getAttribute("rel")).toLowerCase();if(!b.getAttribute("href")||!k.match("lightbox")){continue}j._imgs[e]={src:b.getAttribute("href"),w:-1,h:-1,title:"",cls:b.className,set:k};if(b.getAttribute("title")){j._imgs[e].title=b.getAttribute("title")}else{if(b.firstChild&&b.firstChild.getAttribute&&b.firstChild.getAttribute("title")){j._imgs[e].title=b.firstChild.getAttribute("title")}}b.onclick=j._genOpener(e);if(k!="lightbox"){if(!j._sets[k]){j._sets[k]=new Array()}j._sets[k].push(e)}}var f=g.getElementsByTagName("body")[0];j._wrap=j._createWrapOn(f,c.loadingimg);j._box=j._createBoxOn(f,c);j._img=j._box.firstChild;j._zoomimg=g.getElementById("actionImage");return j},_genOpener:function(b){var a=this;return function(){a._show(b);return false}},_createWrapOn:function(d,a){var b=this;if(!d){return null}var c=document.createElement("div");d.appendChild(c);c.id="overlay";c.style.display="none";c.style.position="fixed";c.style.top="0px";c.style.left="0px";c.style.zIndex="50";c.style.width="100%";c.style.height="100%";if(Browser.isWinIE){c.style.position="absolute"}Event.register(c,"click",function(f){b._close(f)});var e=new Image;e.onload=function(){var f=document.createElement("img");c.appendChild(f);f.id="loadingImage";f.src=e.src;f.style.position="relative";b._set_cursor(f);Event.register(f,"click",function(g){b._close(g)});e.onload=function(){}};if(a!=""){e.src=a}return c},_createBoxOn:function(b,e){var l=this;if(!b){return null}var d=document.createElement("div");b.appendChild(d);d.id="lightbox";d.style.display="none";d.style.position="absolute";d.style.zIndex="60";var c=document.createElement("img");d.appendChild(c);c.id="lightboxImage";l._set_cursor(c);Event.register(c,"mouseover",function(){l._show_action()});Event.register(c,"mouseout",function(){l._hide_action()});Event.register(c,"click",function(n){l._close(n)});if(e.previmg){var f=document.createElement("img");d.appendChild(f);f.id="prevLink";f.style.display="none";f.style.position="absolute";f.style.left="9px";f.style.zIndex="70";f.src=e.previmg;l._prev=f;Event.register(f,"mouseover",function(){l._show_action()});Event.register(f,"click",function(){l._show_next(-1)})}if(e.nextimg){var i=document.createElement("img");d.appendChild(i);i.id="nextLink";i.style.display="none";i.style.position="absolute";i.style.right="9px";i.style.zIndex="70";i.src=e.nextimg;l._next=i;Event.register(i,"mouseover",function(){l._show_action()});Event.register(i,"click",function(){l._show_next(+1)})}var k=document.createElement("img");d.appendChild(k);k.id="actionImage";k.style.display="none";k.style.position="absolute";k.style.top="15px";k.style.left="15px";k.style.zIndex="70";l._set_cursor(k);k.src=l._expand;Event.register(k,"mouseover",function(){l._show_action()});Event.register(k,"click",function(){l._zoom()});Event.register(window,"resize",function(){l._set_size(true)});if(e.closeimg){var a=document.createElement("img");d.appendChild(a);a.id="closeButton";a.style.display="inline";a.style.position="absolute";a.style.right="9px";a.style.top="10px";a.style.zIndex="80";a.src=e.closeimg;l._set_cursor(a);Event.register(a,"click",function(n){l._close(n)})}var j=document.createElement("span");d.appendChild(j);j.id="lightboxCaption";j.style.display="none";j.style.position="absolute";j.style.zIndex="80";if(!e.effectpos){e.effectpos={x:0,y:0}}else{if(e.effectpos.x==""){e.effectpos.x=0}if(e.effectpos.y==""){e.effectpos.y=0}}var m=new Image;m.onload=function(){var n=document.createElement("img");d.appendChild(n);n.id="effectImage";n.src=m.src;if(e.effectclass){n.className=e.effectclass}n.style.position="absolute";n.style.display="none";n.style.left=[e.effectpos.x,"px"].join("");n.style.top=[e.effectpos.y,"px"].join("");n.style.zIndex="90";l._set_cursor(n);Event.register(n,"click",function(){n.style.display="none"})};if(e.effectimg!=""){m.src=e.effectimg}if(l._resizable){var g=document.createElement("div");b.appendChild(g);g.id="lightboxOverallView";g.style.display="none";g.style.position="absolute";g.style.zIndex="70";l._overall=g;var h=document.createElement("div");b.appendChild(h);h.id="lightboxIndicator";h.style.display="none";h.style.position="absolute";h.style.zIndex="80";l._indicator=h}return d},_set_photo_size:function(){var b=this;if(b._open==-1){return}var c={w:b._page.win.w-30,h:b._page.win.h-30};var g={x:15,y:15};var f={p:9,n:9,y:0};if(!b._expanded){var h={w:b._imgs[b._open].w,h:b._imgs[b._open].h};var e=1;if((h.w>=c.w||h.h>=c.h)&&h.h&&h.w){e=((c.w/h.w)<(c.h/h.h))?c.w/h.w:c.h/h.h}b._img.width=Math.floor(h.w*e);b._img.height=Math.floor(h.h*e);b._expandable=(e<1)?true:false;if(b._resizable){b._expandable=true}if(Browser.isWinIE){b._box.style.display="block"}b._imgpos.x=b._pos.x+(c.w-b._img.width)/2;b._imgpos.y=b._pos.y+(c.h-b._img.height)/2;f.y=Math.floor(b._img.height/2)-10;b._show_caption(true);b._show_overall(false)}else{var d=parseInt(b._imgs[b._open].w*b._level);var a=parseInt(b._imgs[b._open].h*b._level);b._minpos.x=b._pos.x+c.w-d;b._minpos.y=b._pos.y+c.h-a;if(d<=c.w){b._imgpos.x=b._pos.x+(c.w-d)/2}else{if(b._imgpos.x>b._pos.x){b._imgpos.x=b._pos.x}else{if(b._imgpos.x<b._minpos.x){b._imgpos.x=b._minpos.x}}g.x=15+b._pos.x-b._imgpos.x;f.p=b._pos.x-b._imgpos.x-5;f.n=d-b._page.win.w+b._imgpos.x+25;if(Browser.isWinIE){f.n-=10}}if(a<=c.h){b._imgpos.y=b._pos.y+(c.h-a)/2;f.y=Math.floor(b._img.height/2)-10}else{if(b._imgpos.y>b._pos.y){b._imgpos.y=b._pos.y}else{if(b._imgpos.y<b._minpos.y){b._imgpos.y=b._minpos.y}}g.y=15+b._pos.y-b._imgpos.y;f.y=Math.floor(c.h/2)-10+b._pos.y-b._imgpos.y}b._img.width=d;b._img.height=a;b._show_caption(false);b._show_overall(true)}b._box.style.left=[b._imgpos.x,"px"].join("");b._box.style.top=[b._imgpos.y,"px"].join("");b._zoomimg.style.left=[g.x,"px"].join("");b._zoomimg.style.top=[g.y,"px"].join("");b._wrap.style.left=b._pos.x;if(b._prev&&b._next){b._prev.style.left=[f.p,"px"].join("");b._next.style.right=[f.n,"px"].join("");b._prev.style.top=b._next.style.top=[f.y,"px"].join("")}},_show_overall:function(g){var c=this;if(c._overall==null){return}if(g){if(c._open==-1){return}var f=100;var e={w:0,h:0,x:0,y:0};var b={w:0,h:0,x:0,y:0};var h={w:c._img.width,h:c._img.height};var d={w:c._page.win.w-30,h:c._page.win.h-30};var a=h.w;if(a<h.h){a=h.h}if(a<d.w){a=d.w}if(a<d.h){a=d.h}if(a<1){return}e.w=parseInt(h.w/a*f);e.h=parseInt(h.h/a*f);b.w=parseInt(d.w/a*f);b.h=parseInt(d.h/a*f);e.x=c._pos.x+d.w-f-20;e.y=c._pos.y+d.h-f-20;b.x=e.x-parseInt((c._imgpos.x-c._pos.x)/a*f);b.y=e.y-parseInt((c._imgpos.y-c._pos.y)/a*f);c._overall.style.left=[e.x,"px"].join("");c._overall.style.top=[e.y,"px"].join("");c._overall.style.width=[e.w,"px"].join("");c._overall.style.height=[e.h,"px"].join("");c._indicator.style.left=[b.x,"px"].join("");c._indicator.style.top=[b.y,"px"].join("");c._indicator.style.width=[b.w,"px"].join("");c._indicator.style.height=[b.h,"px"].join("");c._overall.style.display="block";c._indicator.style.display="block"}else{c._overall.style.display="none";c._indicator.style.display="none"}},_set_size:function(b){var a=this;if(a._open==-1){return}a._page.update();a._pos.update();var d=a._wrap.firstChild;if(d){var c=(a._page.win.h-d.height)/2;if(a._wrap.style.position=="absolute"){c+=a._pos.y}d.style.top=[c,"px"].join("");d.style.left=[(a._page.win.w-d.width-30)/2,"px"].join("")}if(Browser.isWinIE){a._wrap.style.width=[a._page.win.w,"px"].join("");a._wrap.style.height=[a._page.win.h,"px"].join("");a._wrap.style.top=[a._pos.y,"px"].join("")}if(b){a._set_photo_size()}},_set_cursor:function(b){var a=this;if(Browser.isWinIE&&!Browser.isNewIE){return}b.style.cursor="pointer"},_current_setindex:function(){var a=this;if(!a._openedset){return -1}var c=a._sets[a._openedset];for(var b=0,d=c.length;b<d;b++){if(c[b]==a._open){return b}}return -1},_get_setlength:function(){var a=this;if(!a._openedset){return -1}return a._sets[a._openedset].length},_show_action:function(){var b=this;if(b._open==-1||!b._expandable){return}if(!b._zoomimg){return}b._zoomimg.src=(b._expanded)?b._shrink:b._expand;b._zoomimg.style.display="inline";var a=b._current_setindex();if(a>-1){if(a>0){b._prev.style.display="inline"}if(a<b._get_setlength()-1){b._next.style.display="inline"}}},_hide_action:function(){var a=this;if(a._zoomimg){a._zoomimg.style.display="none"}if(a._open>-1&&a._expanded){a._dragstop(null)}if(a._prev){a._prev.style.display="none"}if(a._next){a._next.style.display="none"}},_zoom:function(){var a=this;var b=document.getElementById("closeButton");if(a._expanded){a._reset_func();a._expanded=false;if(b){b.style.display="inline"}}else{if(a._open>-1){a._level=1;a._imgpos.x=a._pos.x;a._imgpos.y=a._pos.y;a._expanded=true;a._funcs.drag=function(c){a._dragstart(c)};a._funcs.dbl=function(c){a._close(null)};if(a._resizable){a._funcs.wheel=function(c){a._onwheel(c)};Event.register(a._box,"mousewheel",a._funcs.wheel)}Event.register(a._img,"mousedown",a._funcs.drag);Event.register(a._img,"dblclick",a._funcs.dbl);if(b){b.style.display="none"}}}a._set_photo_size();a._show_action()},_reset_func:function(){var a=this;if(a._funcs.wheel!=null){Event.deregister(a._box,"mousewheel",a._funcs.wheel)}if(a._funcs.move!=null){Event.deregister(a._img,"mousemove",a._funcs.move)}if(a._funcs.up!=null){Event.deregister(a._img,"mouseup",a._funcs.up)}if(a._funcs.drag!=null){Event.deregister(a._img,"mousedown",a._funcs.drag)}if(a._funcs.dbl!=null){Event.deregister(a._img,"dblclick",a._funcs.dbl)}a._funcs={move:null,up:null,drag:null,wheel:null,dbl:null}},_onwheel:function(a){var b=this;var d=0;a=Event.getEvent(a);if(a.wheelDelta){d=event.wheelDelta/-120}else{if(a.detail){d=a.detail/3}}if(Browser.isOpera){d=-d}var c=(b._level<1)?0.1:(b._level<2)?0.25:(b._level<4)?0.5:1;b._level=(d>0)?b._level+c:b._level-c;if(b._level>8){b._level=8}else{if(b._level<0.5){b._level=0.5}}b._set_photo_size();return Event.stop(a)},_dragstart:function(a){var b=this;a=Event.getEvent(a);b._curpos.x=a.screenX;b._curpos.y=a.screenY;b._funcs.move=function(c){b._dragging(c)};b._funcs.up=function(c){b._dragstop(c)};Event.register(b._img,"mousemove",b._funcs.move);Event.register(b._img,"mouseup",b._funcs.up);return Event.stop(a)},_dragging:function(a){var b=this;a=Event.getEvent(a);b._imgpos.x+=a.screenX-b._curpos.x;b._imgpos.y+=a.screenY-b._curpos.y;b._curpos.x=a.screenX;b._curpos.y=a.screenY;b._set_photo_size();return Event.stop(a)},_dragstop:function(a){var b=this;a=Event.getEvent(a);if(b._funcs.move!=null){Event.deregister(b._img,"mousemove",b._funcs.move)}if(b._funcs.up!=null){Event.deregister(b._img,"mouseup",b._funcs.up)}b._funcs.move=null;b._funcs.up=null;b._set_photo_size();return(a)?Event.stop(a):false},_show_caption:function(c){var b=this;var a=document.getElementById("lightboxCaption");if(!a){return}if(a.innerHTML.length==0||!c){a.style.display="none"}else{a.style.top=[b._img.height+10,"px"].join("");a.style.left="0px";a.style.width=[b._img.width+20,"px"].join("");a.style.display="block"}},_toggle_wrap:function(g){var h=this;h._wrap.style.display=g?"block":"none";if(h._hiding.length==0&&!h._first){var k=["select","embed","object"];for(var f=0,b=k.length;f<b;f++){var c=document.getElementsByTagName(k[f]);for(var e=0,d=c.length;e<d;e++){var a=c[e].style.visibility;if(!a){if(c[e].currentStyle){a=c[e].currentStyle.visibility}else{if(document.defaultView){a=document.defaultView.getComputedStyle(c[e],"").getPropertyValue("visibility")}}}if(a=="hidden"){continue}h._hiding.push(c[e])}}h._first=true}for(var f=0,b=h._hiding.length;f<b;f++){h._hiding[f].style.visibility=g?"hidden":"visible"}},_show:function(c){var b=this;var f=new Image;if(c<0||c>=b._imgs.length){return}var e=document.getElementById("loadingImage");var a=document.getElementById("lightboxCaption");var d=document.getElementById("effectImage");b._open=c;b._set_size(false);b._toggle_wrap(true);if(e){e.style.display="inline"}f.onload=function(){if(b._imgs[b._open].w==-1){b._imgs[b._open].w=f.width;b._imgs[b._open].h=f.height}if(d){d.style.display=(!d.className||b._imgs[b._open].cls==d.className)?"block":"none"}if(a){try{a.innerHTML=b._imgs[b._open].title}catch(g){}}b._set_photo_size();b._hide_action();b._box.style.display="block";b._img.src=f.src;b._img.setAttribute("title",b._imgs[b._open].title);b._timer=window.setInterval(function(){b._set_size(true)},100);if(e){e.style.display="none"}if(b._imgs[b._open].set!="lightbox"){var h=b._imgs[b._open].set;if(b._sets[h].length>1){b._openedset=h}if(!b._prev||!b._next){b._openedset=null}}};b._expandable=false;b._expanded=false;f.src=b._imgs[b._open].src},_close_box:function(){var a=this;a._open=-1;a._openedset=null;a._hide_action();a._hide_action();a._reset_func();a._show_overall(false);a._box.style.display="none";if(a._timer!=null){window.clearInterval(a._timer);a._timer=null}},_show_next:function(d){var a=this;if(!a._openedset){return a._close(null)}var b=a._current_setindex()+d;var c=a._sets[a._openedset][b];a._close_box();a._show(c)},_close:function(a){var b=this;if(a!=null){a=Event.getEvent(a);var c=a.target||a.srcElement;if(c&&c.getAttribute("id")=="lightboxImage"&&b._expanded){return}}b._close_box();b._toggle_wrap(false)}};Event.register(window,"load",function(){var a=new LightBox({loadingimg:"image/lightbox/loading.gif",expandimg:"image/lightbox/expand.gif",shrinkimg:"image/lightbox/shrink.gif",previmg:"image/lightbox/prev.gif",nextimg:"image/lightbox/next.gif",effectimg:"image/lightbox/grviewer.gif",effectpos:{x:-40,y:-20},effectclass:"effectable",closeimg:"image/lightbox/close.gif",resizable:true})});